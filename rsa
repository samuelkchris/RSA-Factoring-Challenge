#!/usr/bin/env bash

find_prime_factors() {
  local num="$1"
  if [ $((num % 2)) -eq 0 ]; then
    echo "2"
    num=$((num / 2))
  fi
  for ((i=3; i<=sqrt; i+=2)); do
    while [ $((num % i)) -eq 0 ]; do
      echo "$i"
      num=$((num / i))
    done
  done
  if [ $num -gt 2 ]; then
    echo "$num"
  fi
}

if [ $# -ne 1 ]
then
  echo 'Usage: rsa <file>'
  exit 1
else
  num=$(head -n 1 "$1")
  sqrt=$(echo "sqrt($num)" | bc -l | awk '{print int($1+0.5)}')
  prime_factors=$(find_prime_factors "$num")
  echo "The prime factors of $num are: $prime_factors"
fi
